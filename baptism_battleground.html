<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹ í•™ ì „ìŸ ì§€ë„: ì„¸ë¡€ (Theological Battleground: Baptism)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .scholar-btn { transition: all 0.2s; border-left: 4px solid transparent; }
        .scholar-btn:hover { background-color: #334155; }
        .scholar-btn.active { background-color: #1e293b; border-left-color: #3b82f6; }
        .scholar-legend { width: 12px; height: 12px; display: inline-block; border-radius: 50%; margin-right: 8px; }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
        .radar-container { position: relative; height: 50vh; width: 100%; }
        @media (min-width: 1024px) { .radar-container { height: 600px; } }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <header class="bg-slate-900 border-b border-slate-700 p-4 flex justify-between items-center shadow-md z-10 shrink-0">
        <div class="flex items-center gap-3">
            <span class="text-2xl">ğŸ›¡ï¸</span>
            <div>
                <h1 class="text-xl font-bold text-white tracking-tight">THEOLOGICAL BATTLEGROUND</h1>
                <p class="text-xs text-slate-400">Operation: BAPTISM (ì„¸ë¡€ ë…¼ìŸ)</p>
            </div>
        </div>
        <div class="flex gap-2">
            <button id="mode-explore" onclick="setMode('explore')" class="px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-500 font-bold">ììœ  ë¶„ì„</button>
            <button id="mode-story" onclick="setMode('story')" class="px-4 py-2 text-sm rounded bg-slate-700 text-slate-300 hover:bg-slate-600">ìŠ¤í† ë¦¬ ëª¨ë“œ</button>
        </div>
    </header>

    <main class="flex-1 flex flex-col lg:flex-row overflow-hidden relative">
        
        <aside class="w-full lg:w-64 bg-slate-800 border-r border-slate-700 flex flex-col z-20 shrink-0 h-1/3 lg:h-auto overflow-y-auto">
            <div class="p-3 bg-slate-900 font-bold text-xs text-slate-400 uppercase tracking-wider sticky top-0 z-10">Scholars & Traditions</div>
            <div id="scholar-list" class="flex-1 overflow-y-auto p-2 space-y-1">
                </div>
        </aside>

        <section class="flex-1 bg-slate-900 flex flex-col relative overflow-hidden">
            <div class="absolute top-4 left-4 z-0 opacity-20 pointer-events-none">
                <div class="text-6xl font-bold text-slate-700">MAP</div>
            </div>
            
            <div class="lg:hidden p-2 text-xs text-center text-slate-500">
                ğŸ”µê°ê´€(ì œë„) ğŸ”´ì£¼ê´€(ì‘ë‹µ) ğŸŸ¢ì´ˆì›”(ì‹ ë¹„)
            </div>

            <div class="flex-1 flex items-center justify-center p-2 lg:p-8">
                <div class="radar-container">
                    <canvas id="theologyChart"></canvas>
                </div>
            </div>
            
            <div id="story-controls" class="hidden absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-slate-800/90 backdrop-blur rounded-full px-6 py-3 shadow-2xl border border-slate-600 flex items-center gap-4 z-30">
                <button onclick="prevStep()" class="text-slate-300 hover:text-white">â—€ ì´ì „</button>
                <span id="step-indicator" class="text-sm font-mono text-blue-400 font-bold">Step 1/12</span>
                <button onclick="nextStep()" class="text-slate-300 hover:text-white">ë‹¤ìŒ â–¶</button>
            </div>
        </section>

        <aside class="w-full lg:w-80 bg-slate-800 border-l border-slate-700 flex flex-col z-20 shrink-0 h-1/2 lg:h-auto">
            <div class="flex-1 overflow-y-auto p-5 border-b border-slate-700 bg-slate-800">
                <h3 class="text-xs font-bold text-blue-400 uppercase mb-2">Tactical Briefing</h3>
                <h2 id="info-title" class="text-xl font-bold text-white mb-3">ëŒ€ê¸° ì¤‘...</h2>
                <div id="info-content" class="text-sm text-slate-300 leading-relaxed space-y-3">
                    <p>ì¢Œì¸¡ íŒ¨ë„ì—ì„œ ì‹ í•™ìë¥¼ ì„ íƒí•˜ê±°ë‚˜, ìƒë‹¨ì˜ 'ìŠ¤í† ë¦¬ ëª¨ë“œ'ë¥¼ í†µí•´ ì„¸ë¡€ ë…¼ìŸì˜ ì—­ì‚¬ì  íë¦„ì„ ì¶”ì í•˜ì‹­ì‹œì˜¤.</p>
                </div>
            </div>

            <div class="h-40 shrink-0 bg-slate-900 p-4 relative">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-green-500"></div>
                <h3 class="text-xs font-bold text-green-400 uppercase mb-2 flex items-center gap-2">
                    <span>ğŸ¤– AI Analytics</span>
                </h3>
                <div id="ai-insight" class="text-xs text-slate-400 leading-relaxed h-full overflow-y-auto pr-1">
                    ë°ì´í„° í¬ì¸íŠ¸ë¥¼ ì„ íƒí•˜ë©´ ë¹„êµ ë¶„ì„ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.
                </div>
            </div>
        </aside>

    </main>

    <script>
        // === Data: The 7 Axes & 10 Scholars ===
        const axes = [
            "ğŸ”µì„±ë¡€ì  íš¨ë ¥", "ğŸ”µì–¸ì•½ ê³µë™ì²´ì„±", "ğŸ”µì œë„ì  í•„ìˆ˜ì„±", 
            "ğŸ”´ìˆ˜ì„¸ìì˜ ëŠ¥ë™ì  ì‹ ì•™", "ğŸ”´ìœ¤ë¦¬ì  ê²°ë‹¨", 
            "ğŸŸ¢ì¤‘ìƒì˜ ì‹ ë¹„", "ğŸŸ¢í•˜ë‚˜ë‹˜ì˜ ì„ ì¬ì  ì£¼ê¶Œ"
        ];

        // Scale: 0-10
        const scholars = [
            {
                id: "judaism", name: "ìœ ëŒ€êµ ë°°ê²½ (Judaism)", group: "ê³ ëŒ€/ë°°ê²½", color: "rgba(156, 163, 175, 1)", bg: "rgba(156, 163, 175, 0.2)",
                scores: [2, 9, 8, 3, 5, 2, 8],
                desc: "ê¸°ë…êµ ì„¸ë¡€ì˜ ë°°ê²½ì—ëŠ” ìœ ëŒ€êµì˜ 'ì •ê²°ë¡€(ë¯¸í¬ë°”)'ì™€ 'í• ë¡€'ê°€ ìˆìŠµë‹ˆë‹¤. ë¯¸í¬ë°”ëŠ” ì œì˜ì  ë¶€ì •í•¨ì„ ì”»ëŠ” ë°˜ë³µì  í–‰ìœ„ì˜€ê³ , í• ë¡€ëŠ” ì–¸ì•½ ë°±ì„±ì´ ë˜ëŠ” ë‹¨íšŒì ì´ë©° ì§€ì›Œì§€ì§€ ì•ŠëŠ” í‘œì§€ì˜€ìŠµë‹ˆë‹¤. ì´ˆê¸° ê¸°ë…êµëŠ” ì´ ë‘ ê°€ì§€ ë°°ê²½ ìœ„ì—ì„œ ì„¸ë¡€ë¥¼ 'ìƒˆ ì–¸ì•½ì˜ ì…ë¬¸ì‹'ìœ¼ë¡œ ì´í•´í–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ìœ ì•„ì„¸ë¡€ ë…¼ìŸì—ì„œ 'í• ë¡€ì˜ ê¸°ë…êµì  ì™„ì„±'ì´ë¼ëŠ” ê°œë…ì€ í›—ë‚  ì¹¼ë±…ê³¼ ì–¸ì•½ì‹ í•™ìë“¤ì—ê²Œ ê²°ì •ì ì¸ ë…¼ê±°ê°€ ë©ë‹ˆë‹¤."
            },
            {
                id: "augustine", name: "ì•„ìš°êµ¬ìŠ¤í‹°ëˆ„ìŠ¤ (Augustine)", group: "êµë¶€/ì¤‘ì„¸", color: "rgba(234, 179, 8, 1)", bg: "rgba(234, 179, 8, 0.2)",
                scores: [9, 8, 9, 1, 3, 8, 9],
                desc: "ì•„ìš°êµ¬ìŠ¤í‹°ëˆ„ìŠ¤ëŠ” ë„ë‚˜íˆ¬ìŠ¤íŒŒ ë…¼ìŸì„ í†µí•´ ì„¸ë¡€ì˜ íš¨ë ¥ì´ ì§‘ë¡€ìì˜ ê±°ë£©í•¨ì´ ì•„ë‹Œ, ê·¸ë¦¬ìŠ¤ë„ì˜ ë§ì”€ì— ì˜ì¡´í•œë‹¤ëŠ” ì ì„ í™•ë¦½í–ˆìŠµë‹ˆë‹¤. ê²°ì •ì ìœ¼ë¡œ ê·¸ëŠ” 'ì›ì£„(Original Sin)' êµë¦¬ë¥¼ í†µí•´ ìœ ì•„ì„¸ë¡€ë¥¼ ì‹ í•™ì ìœ¼ë¡œ ì •ë‹¹í™”í–ˆìŠµë‹ˆë‹¤. ê°“ íƒœì–´ë‚œ ìœ ì•„ë¼ë„ ì•„ë‹´ì˜ ì£„ì±…ì„ ì”»ê¸° ìœ„í•´ ì„¸ë¡€ê°€ í•„ìˆ˜ì ì´ë©°, ì´ëŠ” ì „ì ìœ¼ë¡œ í•˜ë‚˜ë‹˜ì˜ ì„ ì¬ì  ì€ì´ì— ì˜í•œ ê²ƒì„ì„ ê°•ì¡°í•©ë‹ˆë‹¤. ê·¸ì˜ ì…ì¥ì€ ì„œë°© êµíšŒ ì„±ë¡€ì „ ì‹ í•™ì˜ ê¸°ì´ˆì„ì´ ë˜ì—ˆìŠµë‹ˆë‹¤."
            },
            {
                id: "aquinas", name: "í† ë§ˆìŠ¤ ì•„í€´ë‚˜ìŠ¤ (Aquinas)", group: "êµë¶€/ì¤‘ì„¸", color: "rgba(217, 119, 6, 1)", bg: "rgba(217, 119, 6, 0.2)",
                scores: [10, 8, 10, 2, 3, 9, 8],
                desc: "ì¤‘ì„¸ ìŠ¤ì½œë¼ ì‹ í•™ì˜ ì •ì ì¸ ì•„í€´ë‚˜ìŠ¤ëŠ” ì„¸ë¡€ë¥¼ 'ì‚¬íš¨ì (Ex opere operato)' ì€í˜œì˜ ìˆ˜ë‹¨ìœ¼ë¡œ ì²´ê³„í™”í–ˆìŠµë‹ˆë‹¤. ì¦‰, ì˜¬ë°”ë¥¸ í˜•ì‹ìœ¼ë¡œ ì§‘ë¡€ëœ ì„¸ë¡€ëŠ” ìˆ˜ì„¸ìì˜ ì£¼ê´€ì  ìƒíƒœì™€ ë¬´ê´€í•˜ê²Œ ê°ê´€ì ìœ¼ë¡œ ì„±ë ¹ì˜ ì¸ì¹¨ê³¼ ì€ì´ì„ ì£¼ì…í•©ë‹ˆë‹¤. ê·¸ì—ê²Œ ì„¸ë¡€ëŠ” êµ¬ì›ì— ì ˆëŒ€ì ìœ¼ë¡œ í•„ìš”í•œ(necessity of means) ì œë„ì´ë©°, êµíšŒë¼ëŠ” ì‹ ë¹„ì²´ì— ì—°í•©ë˜ëŠ” ìœ ì¼í•œ ë¬¸ì…ë‹ˆë‹¤. ì´ëŠ” ê°€í†¨ë¦­ ì„±ë¡€ì „ ì²´ê³„ì˜ ê°€ì¥ ê°•ë ¥í•œ ì œë„ì  í˜•íƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤."
            },
            {
                id: "luther", name: "ë§ˆë¥´í‹´ ë£¨í„° (Luther)", group: "ì¢…êµê°œí˜", color: "rgba(239, 68, 68, 1)", bg: "rgba(239, 68, 68, 0.2)",
                scores: [9, 7, 8, 4, 4, 8, 9],
                desc: "ë£¨í„°ëŠ” 'ì˜¤ì§ ë¯¿ìŒ'ì„ ì™¸ì³¤ì§€ë§Œ, ì„¸ë¡€ì— ìˆì–´ì„œëŠ” ë†€ëë„ë¡ ê°ê´€ì  íš¨ë ¥ì„ ê³ ìˆ˜í–ˆìŠµë‹ˆë‹¤. ê·¸ì—ê²Œ ì„¸ë¡€ëŠ” ë‹¨ìˆœí•œ ë¬¼ì´ ì•„ë‹ˆë¼ 'í•˜ë‚˜ë‹˜ì˜ ë§ì”€ì´ ê²°í•©ëœ ë¬¼'ì…ë‹ˆë‹¤. ê·¸ëŠ” ì¬ì„¸ë¡€íŒŒì˜ ì£¼ê´€ì£¼ì˜ì— ë§ì„œ, ìœ ì•„ì„¸ë¡€ê°€ ìœ íš¨í•œ ì´ìœ ëŠ” 'ìš°ë¦¬ì˜ ë¯¿ìŒì´ ì„¸ë¡€ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼, í•˜ë‚˜ë‹˜ì˜ ë§ì”€ì´ ë¯¿ìŒì„ ì°½ì¡°í•˜ê¸° ë•Œë¬¸'ì´ë¼ê³  ì—­ì„¤í–ˆìŠµë‹ˆë‹¤. í‰ìƒ ìš°ìš¸ì¦ì— ì‹œë‹¬ë¦´ ë•Œ 'ë‚˜ëŠ” ì„¸ë¡€ ë°›ì•˜ë‹¤(Baptizatus sum)'ë¼ê³  ì™¸ì¹˜ë©° ê°ê´€ì  ì€í˜œì— ë§¤ë‹¬ë ¸ìŠµë‹ˆë‹¤."
            },
            {
                id: "zwingli", name: "ìš¸ë¦¬íˆ ì¸ ë¹™ê¸€ë¦¬ (Zwingli)", group: "ì¢…êµê°œí˜", color: "rgba(16, 185, 129, 1)", bg: "rgba(16, 185, 129, 0.2)",
                scores: [1, 6, 5, 6, 8, 1, 5],
                desc: "ì¸ ë¹™ê¸€ë¦¬ëŠ” ì„¸ë¡€ì˜ ì„±ë¡€ì  íš¨ë ¥ì„ ì² ì €íˆ ë¶€ì¸í•˜ê³  'ìƒì§•ì„¤'ë¡œ ëŒì•„ì„°ìŠµë‹ˆë‹¤. ê·¸ì—ê²Œ 'Sacramentum'ì€ ë¡œë§ˆ êµ°ì¸ì˜ ì¶©ì„± ë§¹ì„¸ì™€ ê°™ì€ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ì¦‰, ì„¸ë¡€ëŠ” í•˜ë‚˜ë‹˜ì´ ì€í˜œë¥¼ ì£¼ëŠ” í†µë¡œê°€ ì•„ë‹ˆë¼, ì‹ ìê°€ ê³µë™ì²´ ì•ì—ì„œ ìì‹ ì˜ ì‹ ì•™ì„ ê³µì ìœ¼ë¡œ ì„œì•½í•˜ê³  ì…ì¦í•˜ëŠ” í‘œì§€(Badge)ì…ë‹ˆë‹¤. ìœ ì•„ì„¸ë¡€ëŠ” ì˜¹í˜¸í–ˆì§€ë§Œ, ê·¸ ê·¼ê±°ë¥¼ ì€í˜œ ì£¼ì…ì´ ì•„ë‹Œ 'ì–¸ì•½ ë°±ì„±ì˜ ì†Œì† í™•ì¸'ì´ë¼ëŠ” ì‚¬íšŒì /ê³µë™ì²´ì  ì°¨ì›ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤."
            },
            {
                id: "calvin", name: "ì¥ ì¹¼ë±… (Calvin)", group: "ì¢…êµê°œí˜", color: "rgba(59, 130, 246, 1)", bg: "rgba(59, 130, 246, 0.2)",
                scores: [7, 9, 8, 3, 6, 7, 10],
                desc: "ì¹¼ë±…ì€ ë£¨í„°ì™€ ì¸ ë¹™ê¸€ë¦¬ì˜ ì‚¬ì´ì—ì„œ ê· í˜•ì„ ì¡ìœ¼ë ¤ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŠ” ì„¸ë¡€ë¥¼ 'ì€í˜œì˜ ì•½ì†ì— ëŒ€í•œ ì¸(Seal)ì´ì í‘œ(Sign)'ë¡œ ì •ì˜í–ˆìŠµë‹ˆë‹¤. ì„¸ë¡€ ìì²´ê°€ êµ¬ì›ì„ ì£¼ì…í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ì„±ë ¹ì€ ì„¸ë¡€ë¼ëŠ” ë„êµ¬ë¥¼ í†µí•´ ì‹ ìì˜ ë¯¿ìŒì„ ê°•í™”í•˜ê³  ê·¸ë¦¬ìŠ¤ë„ì™€ì˜ ì—°í•©ì„ í™•ì¦í•©ë‹ˆë‹¤. íŠ¹íˆ êµ¬ì•½ì˜ í• ë¡€ì™€ ì‹ ì•½ì˜ ì„¸ë¡€ë¥¼ ì–¸ì•½ì˜ ì—°ì†ì„± ì•ˆì—ì„œ ê°•ë ¥í•˜ê²Œ ì—°ê²°í•˜ì—¬ ìœ ì•„ì„¸ë¡€ë¥¼ ì˜¹í˜¸í–ˆìœ¼ë©°, ì´ëŠ” ì¥ë¡œêµ ì‹ í•™ì˜ ë¼ˆëŒ€ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤."
            },
            {
                id: "anabaptist", name: "ì¬ì„¸ë¡€íŒŒ/íœ˜ë¸Œë§ˆì´ì–´ (Anabaptist)", group: "ì¢…êµê°œí˜", color: "rgba(168, 85, 247, 1)", bg: "rgba(168, 85, 247, 0.2)",
                scores: [1, 2, 4, 10, 10, 3, 2],
                desc: "ì¬ì„¸ë¡€íŒŒ(ê¸‰ì§„ ì¢…êµê°œí˜)ëŠ” 1,500ë…„ êµíšŒì‚¬ì—ì„œ ê°€ì¥ ê¸‰ì§„ì ì¸ ë‹¨ì ˆì„ ì‹œë„í–ˆìŠµë‹ˆë‹¤. 'ë¯¿ì§€ ì•ŠëŠ” ìëŠ” ì„¸ë¡€ ë°›ì„ ìˆ˜ ì—†ë‹¤'ëŠ” ì›ì¹™ í•˜ì— ìœ ì•„ì„¸ë¡€ë¥¼ 'ê°€ì¦ìŠ¤ëŸ¬ìš´ ë¡œë§ˆì˜ ë°œëª…í’ˆ'ì´ë¼ë©° ê±°ë¶€í–ˆìŠµë‹ˆë‹¤. ì´ë“¤ì—ê²Œ ì§„ì •í•œ ì„¸ë¡€ëŠ” 'ì„ í•œ ì–‘ì‹¬ì˜ ì‘ë‹µ'ì´ì, ì‚°ìƒìˆ˜í›ˆì„ ë”°ë¥´ê² ë‹¤ëŠ” ì£½ìŒì„ ê°ì˜¤í•œ ìœ¤ë¦¬ì  ê²°ë‹¨ì…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ê·¸ë“¤ì€ ê°€í†¨ë¦­ê³¼ ê°œì‹ êµ ì–‘ìª½ìœ¼ë¡œë¶€í„° ë”ì°í•œ ë°•í•´ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤."
            },
            {
                id: "schleiermacher", name: "ìŠë¼ì´ì–´ë§ˆí—ˆ (Schleiermacher)", group: "ê·¼í˜„ëŒ€", color: "rgba(236, 72, 153, 1)", bg: "rgba(236, 72, 153, 0.2)",
                scores: [2, 8, 6, 5, 4, 2, 5],
                desc: "ê·¼ëŒ€ ì‹ í•™ì˜ ì•„ë²„ì§€ ìŠë¼ì´ì–´ë§ˆí—ˆì—ê²Œ ì¢…êµëŠ” 'ì ˆëŒ€ì˜ì¡´ì˜ ê°ì •'ì…ë‹ˆë‹¤. ì´ ê´€ì ì—ì„œ ì„¸ë¡€ëŠ” ê°œì¸ì—ê²Œ ì´ˆìì—°ì  ë³€í™”ë¥¼ ì¼ìœ¼í‚¤ëŠ” ë§ˆìˆ ì  í–‰ìœ„ê°€ ì•„ë‹ˆë¼, ê°œì¸ì´ ê·¸ë¦¬ìŠ¤ë„ì¸ ê³µë™ì²´ì˜ 'ì§‘ë‹¨ì  ì‚¶'ì— ì°¸ì—¬í•˜ê²Œ ë˜ëŠ” ì…ë¬¸ì‹ì…ë‹ˆë‹¤. ê·¸ëŠ” ìœ ì•„ì„¸ë¡€ë¥¼ ì¸ì •í•˜ë˜, ê·¸ê²ƒì´ ì™„ì „í•´ì§€ê¸° ìœ„í•´ì„œëŠ” í›—ë‚  ê²¬ì‹ ë¡€(Confirmation)ë¥¼ í†µí•œ ê°œì¸ì˜ ì£¼ê´€ì  ì‹ ì•™ ê³ ë°±ì´ ë°˜ë“œì‹œ ë’¤ë”°ë¼ì•¼ í•œë‹¤ê³  ë³´ì•˜ìŠµë‹ˆë‹¤."
            },
            {
                id: "barth", name: "ì¹´ë¥¼ ë°”ë¥´íŠ¸ (Barth)", group: "ê·¼í˜„ëŒ€", color: "rgba(244, 63, 94, 1)", bg: "rgba(244, 63, 94, 0.2)",
                scores: [2, 4, 3, 9, 9, 2, 6],
                desc: "ë°”ë¥´íŠ¸ëŠ” ë§ë…„ì— ê·¸ì˜ ëŒ€ì‘ ã€êµíšŒêµì˜í•™ã€ IV/4ê¶Œì—ì„œ ìœ ì•„ì„¸ë¡€ë¥¼ ê°•ë ¥íˆ ë¹„íŒí•˜ë©° êµê³„ì— ì¶©ê²©ì„ ì£¼ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŠ” ì„¸ë¡€ê°€ ì€í˜œë¥¼ ì „ë‹¬í•˜ëŠ” ìˆ˜ë‹¨(Sacrament)ì´ ì•„ë‹ˆë¼, ì´ë¯¸ ì£¼ì–´ì§„ ì€í˜œì— ëŒ€í•œ ì¸ê°„ì˜ 'ììœ ë¡œìš´ ì‘ë‹µ'ì´ì 'ìœ¤ë¦¬ì  ìˆœì¢…'ì´ì–´ì•¼ í•œë‹¤ê³  ì£¼ì¥í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì¸ì§€ ëŠ¥ë ¥ì´ ì—†ëŠ” ìœ ì•„ì—ê²Œ ì„¸ë¡€ë¥¼ ë² í‘¸ëŠ” ê²ƒì€ ì¸ê°„ì˜ ììœ ë¡œìš´ ì‘ë‹µê¶Œì„ ë°•íƒˆí•˜ëŠ” 'ê°•ì œ'ì´ë©° ë¹„ì„±ê²½ì ì´ë¼ê³  ë³´ì•˜ìŠµë‹ˆë‹¤."
            },
            {
                id: "cullmann", name: "ì˜¤ìŠ¤ì¹´ ì¿¨ë§Œ (Cullmann)", group: "ê·¼í˜„ëŒ€", color: "rgba(14, 165, 233, 1)", bg: "rgba(14, 165, 233, 0.2)",
                scores: [6, 9, 7, 2, 4, 6, 9],
                desc: "ì˜¤ìŠ¤ì¹´ ì¿¨ë§Œì€ ë°”ë¥´íŠ¸ì˜ ìœ ì•„ì„¸ë¡€ ë¹„íŒì— ë§ì„œ ã€ì„¸ë¡€ì™€ ì„±ë ¹ã€ì„ ì €ìˆ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŠ” 'êµ¬ì†ì‚¬(Heilsgeschichte)'ì˜ ê´€ì ì—ì„œ, ì„¸ë¡€ê°€ ê°œì¸ì˜ ê²°ë‹¨ì´ ì•„ë‹Œ ê·¸ë¦¬ìŠ¤ë„ì˜ ì£½ìŒê³¼ ë¶€í™œì´ë¼ëŠ” ê°ê´€ì  ì‚¬ê±´ì— ì ‘ë¶™ì—¬ì§€ëŠ” ê²ƒì„ì„ ê°•ì¡°í–ˆìŠµë‹ˆë‹¤. ëª¨ë“  ì¸ê°„ì€ íƒœì–´ë‚˜ë©´ì„œ ì£„ì˜ ì—°ëŒ€ì„± ì•ˆì— ìˆë“¯, ì„¸ë¡€ë¥¼ í†µí•´ ê·¸ë¦¬ìŠ¤ë„ì˜ ëª¸ì´ë¼ëŠ” ì€í˜œì˜ ì—°ëŒ€ì„± ì•ˆìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŠ” ìœ ì•„ì„¸ë¡€ì•¼ë§ë¡œ í•˜ë‚˜ë‹˜ì˜ ì„ ì¬ì  ì€ì´ì„ ê°€ì¥ ì˜ ë“œëŸ¬ë‚¸ë‹¤ê³  ë³´ì•˜ìŠµë‹ˆë‹¤."
            }
        ];

        // === State Management ===
        let activeIndices = new Set([3]); // Default: Luther
        let currentMode = 'explore';
        let currentStep = 0;
        let chartInstance = null;

        // === Story Steps ===
        const storySteps = [
            {
                title: "ì„œë§‰: ë¬¼ê³¼ ì–¸ì•½",
                desc: "ê¸°ë…êµ ì„¸ë¡€ ë…¼ìŸì„ ì´í•´í•˜ë ¤ë©´ ìœ ëŒ€êµì˜ ë‘ ê¸°ë‘¥ì„ ë´ì•¼ í•©ë‹ˆë‹¤. 'ë¯¸í¬ë°”'ëŠ” ì •ê²°í•¨ì„ ìœ„í•œ ë°˜ë³µì  ì”»ìŒì´ì—ˆê³ , 'í• ë¡€'ëŠ” ì–¸ì•½ ë°±ì„±ì´ ë˜ëŠ” ì§€ì›Œì§€ì§€ ì•ŠëŠ” í‘œì§€ì˜€ìŠµë‹ˆë‹¤. ì´ˆê¸° ê¸°ë…êµëŠ” ì´ ìœ ì‚°ì„ ì–´ë–»ê²Œ ê³„ìŠ¹í•˜ê³  ë³€í˜•í–ˆì„ê¹Œìš”?",
                layers: [0] // Judaism
            },
            {
                title: "ì œë„í™”: ì€ì´ì˜ ì£¼ì…",
                desc: "ë°•í•´ ì‹œëŒ€ê°€ ëë‚˜ê³  ê¸°ë…êµê°€ ì œêµ­í™”ë˜ë©´ì„œ, ì„¸ë¡€ëŠ” êµ¬ì›ì„ ìœ„í•œ í•„ìˆ˜ ì œë„ë¡œ êµ³ì–´ì§‘ë‹ˆë‹¤. ì•„ìš°êµ¬ìŠ¤í‹°ëˆ„ìŠ¤ëŠ” 'ì›ì£„'ë¥¼ ì”»ê¸° ìœ„í•´ ìœ ì•„ì„¸ë¡€ë¥¼ ì •ë‹¹í™”í–ˆê³ , ì•„í€´ë‚˜ìŠ¤ëŠ” ì´ë¥¼ 'ì‚¬íš¨ì (ìë™ì ) ì€ì´ ì£¼ì…'ì˜ ìˆ˜ë‹¨ìœ¼ë¡œ ì™„ì„±í–ˆìŠµë‹ˆë‹¤. ì„¸ë¡€ëŠ” êµíšŒì˜ ë…ì ì  ê¶Œí•œì´ ë˜ì—ˆìŠµë‹ˆë‹¤.",
                layers: [1, 2] // Augustine, Aquinas
            },
            {
                title: "ì¢…êµê°œí˜ 1: ë£¨í„°ì˜ ë”œë ˆë§ˆ",
                desc: "ë£¨í„°ëŠ” 'ì˜¤ì§ ë¯¿ìŒ'ì„ ì™¸ì¹˜ë©° ê°€í†¨ë¦­ì˜ ê³µë¡œ ì‚¬ìƒì„ ë¹„íŒí–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì„¸ë¡€ì— ìˆì–´ì„œëŠ” íƒ€í˜‘í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ëŠ” ê¸‰ì§„íŒŒì˜ ì£¼ê´€ì£¼ì˜ë¥¼ ë§‰ê¸° ìœ„í•´ 'ë§ì”€ì´ ì•½ì†ëœ ë¬¼'ì˜ ê°ê´€ì  íš¨ë ¥ì„ ê³ ìˆ˜í•˜ë©° ìœ ì•„ì„¸ë¡€ë¥¼ ê°•ë ¥íˆ ì˜¹í˜¸í–ˆìŠµë‹ˆë‹¤.",
                layers: [3] // Luther
            },
            {
                title: "ì¢…êµê°œí˜ 2: ìƒì§•ìœ¼ë¡œì˜ ê¸‰ì„ íšŒ",
                desc: "ìŠ¤ìœ„ìŠ¤ì˜ ì¸ ë¹™ê¸€ë¦¬ëŠ” ë£¨í„°ì™€ ê²°ë³„í•©ë‹ˆë‹¤. ê·¸ëŠ” 'ë¬¼ì§ˆì€ ì˜ì ì¸ ê²ƒì„ ì „ë‹¬í•  ìˆ˜ ì—†ë‹¤'ê³  ë¯¿ì—ˆìŠµë‹ˆë‹¤. ê·¸ì—ê²Œ ì„¸ë¡€ëŠ” í•˜ë‚˜ë‹˜ì´ ì£¼ì‹œëŠ” ì€í˜œê°€ ì•„ë‹ˆë¼, êµ°ì¸ì˜ ë§¹ì„¸(Sacramentum)ì²˜ëŸ¼ ì¸ê°„ì´ ë°”ì¹˜ëŠ” ì¶©ì„± ì„œì•½ì´ì ìƒì§•ì´ì—ˆìŠµë‹ˆë‹¤.",
                layers: [3, 4] // Luther vs Zwingli
            },
            {
                title: "ì¢…êµê°œí˜ 3: ì¹¼ë±…ì˜ ì¢…í•©",
                desc: "ì¹¼ë±…ì€ ë£¨í„°ì˜ ê°ê´€ì„±ê³¼ ì¸ ë¹™ê¸€ë¦¬ì˜ ìƒì§•ë¡  ì‚¬ì´ì—ì„œ ê¸¸ì„ ì°¾ìŠµë‹ˆë‹¤. ê·¸ëŠ” ì„¸ë¡€ë¥¼ 'ì€í˜œì˜ ì¸(Seal)'ìœ¼ë¡œ ì •ì˜í•˜ë©°, ì„±ë ¹ì´ ì´ ë„êµ¬ë¥¼ í†µí•´ ì‹ ì•™ì„ í™•ì¦í•œë‹¤ê³  ë³´ì•˜ìŠµë‹ˆë‹¤. ì–¸ì•½ ì‹ í•™ì„ í†µí•´ ìœ ì•„ì„¸ë¡€ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ë°©ì–´í–ˆìŠµë‹ˆë‹¤.",
                layers: [3, 5] // Luther, Calvin
            },
            {
                title: "ê¸‰ì§„ì  ë‹¨ì ˆ: ì¬ì„¸ë¡€íŒŒì˜ ë„ì „",
                desc: "ì¢…êµê°œí˜ì˜ ì¢ŒíŒŒ, ì¬ì„¸ë¡€íŒŒëŠ” í­íƒ„ì„ ë˜ì§‘ë‹ˆë‹¤. 'ë¯¿ìŒ ì—†ëŠ” ì„¸ë¡€ëŠ” ë¬´íš¨ë‹¤.' ê·¸ë“¤ì€ ìœ ì•„ì„¸ë¡€ë¥¼ ê±°ë¶€í•˜ê³  ì„±ì¸ ì‹ ìì˜ ì„¸ë¡€(ì¬ì„¸ë¡€)ë¥¼ ê°í–‰í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¹ì‹œ ì‚¬íšŒì˜ ê·¼ê°„ì„ í”ë“œëŠ” ë°˜ì—­ í–‰ìœ„ë¡œ ê°„ì£¼ë˜ì–´ í”¼ì˜ ë°•í•´ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.",
                layers: [6, 1, 3] // Anabaptist vs Augustine/Aquinas (Comparison)
            },
            {
                title: "ê·¼ëŒ€ì˜ ì£¼ê´€ì  ì „í™˜",
                desc: "ê³„ëª½ì£¼ì˜ ì´í›„ ìŠë¼ì´ì–´ë§ˆí—ˆëŠ” ì„¸ë¡€ë¥¼ ì´ˆìì—°ì  ì‚¬ê±´ì—ì„œ 'ê³µë™ì²´ ì…ë¬¸ì‹'ìœ¼ë¡œ ì¬í•´ì„í•©ë‹ˆë‹¤. êµë¦¬ëŠ” ê°ì •ìœ¼ë¡œ, ê°ê´€ì  íš¨ë ¥ì€ ì£¼ê´€ì  ì‹ ì•™ ê³µìœ ë¡œ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤.",
                layers: [7] // Schleiermacher
            },
            {
                title: "í˜„ëŒ€ì˜ ì¶©ê²©: ë°”ë¥´íŠ¸ì˜ ë°˜ë€",
                desc: "20ì„¸ê¸° ìµœê³ ì˜ ì‹ í•™ì ì¹¼ ë°”ë¥´íŠ¸ëŠ” ë§ë…„ì— ìœ ì•„ì„¸ë¡€ë¥¼ 'ë¹„ì„±ê²½ì 'ì´ë¼ë©° ê±°ë¶€í•˜ëŠ” ì¶©ê²©ì ì¸ ì…ì¥ì„ ì·¨í•©ë‹ˆë‹¤. ê·¸ëŠ” ì„¸ë¡€ê°€ ì€í˜œì˜ ìˆ˜ë‹¨ì´ ì•„ë‹ˆë¼, ì¸ê°„ì˜ ììœ ë¡œìš´ ìœ¤ë¦¬ì  ì‘ë‹µì´ì–´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•˜ë©° ì¬ì„¸ë¡€íŒŒì˜ í†µì°°ì„ í˜„ëŒ€ì ìœ¼ë¡œ ë˜ì‚´ë ¸ìŠµë‹ˆë‹¤.",
                layers: [8, 3] // Barth vs Luther
            },
            {
                title: "êµ¬ì†ì‚¬ì˜ ë°˜ê²©: ì¿¨ë§Œ",
                desc: "ì¿¨ë§Œì€ ë°”ë¥´íŠ¸ì— ë§ì„œ 'êµ¬ì†ì‚¬'ë¥¼ ë“¤ê³  ë‚˜ì˜µë‹ˆë‹¤. ì„¸ë¡€ëŠ” ë‚´ ê²°ë‹¨ì´ ì•„ë‹ˆë¼, ê·¸ë¦¬ìŠ¤ë„ì˜ ì£½ìŒê³¼ ë¶€í™œì´ë¼ëŠ” ê°ê´€ì  ì‚¬ê±´ì— í¸ì…ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŠ” ìœ ì•„ì„¸ë¡€ì•¼ë§ë¡œ í•˜ë‚˜ë‹˜ì˜ ì„ ì¬ì  ì€ì´ì„ ê°€ì¥ ì˜ ë³´ì—¬ì¤€ë‹¤ê³  ë³€ì¦í–ˆìŠµë‹ˆë‹¤.",
                layers: [9, 8] // Cullmann vs Barth
            },
             {
                title: "ì „ì¥ ìš”ì•½: ì„¸ë¡€ì˜ ìŠ¤í™íŠ¸ëŸ¼",
                desc: "ì˜¤ëŠ˜ë‚  ì„¸ë¡€ ë…¼ìŸì€ í¬ê²Œ 'ì„±ë¡€ì „ì  ê°ê´€ì£¼ì˜(ê°€í†¨ë¦­/ë£¨í„°/ì„±ê³µíšŒ)'ì™€ 'ì‹ ì•™ê³ ë°±ì  ì£¼ê´€ì£¼ì˜(ì¹¨ë¡€êµ/ì¬ì„¸ë¡€íŒŒ/í˜„ëŒ€ë³µìŒì£¼ì˜)', ê·¸ë¦¬ê³  ê·¸ ì‚¬ì´ì˜ 'ì–¸ì•½ì  ì¢…í•©(ì¥ë¡œêµ/ê°œí˜íŒŒ)'ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ì„¸ë¡€ê´€ì€ ì–´ë””ì— ìœ„ì¹˜í•©ë‹ˆê¹Œ?",
                layers: [3, 5, 6] // Reformers view
            }
        ];

        // === Initialization ===
        document.addEventListener('DOMContentLoaded', () => {
            renderScholarList();
            initChart();
            updateUI();
        });

        // === Core Functions ===
        function setMode(mode) {
            currentMode = mode;
            document.getElementById('mode-explore').className = mode === 'explore' ? 
                "px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-500 font-bold" : 
                "px-4 py-2 text-sm rounded bg-slate-700 text-slate-300 hover:bg-slate-600";
            document.getElementById('mode-story').className = mode === 'story' ? 
                "px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-500 font-bold" : 
                "px-4 py-2 text-sm rounded bg-slate-700 text-slate-300 hover:bg-slate-600";

            const storyControls = document.getElementById('story-controls');
            if (mode === 'story') {
                storyControls.classList.remove('hidden');
                storyControls.classList.add('flex');
                currentStep = 0;
                loadStoryStep();
            } else {
                storyControls.classList.add('hidden');
                storyControls.classList.remove('flex');
                activeIndices = new Set([3]); // Reset to Luther
                updateUI();
            }
        }

        function toggleScholar(index) {
            if (currentMode === 'story') return; // Locked in story mode
            if (activeIndices.has(index)) {
                if (activeIndices.size > 1) activeIndices.delete(index); // Keep at least one
            } else {
                if (activeIndices.size >= 3) {
                    const it = activeIndices.values();
                    activeIndices.delete(it.next().value); // Remove oldest
                }
                activeIndices.add(index);
            }
            updateUI();
        }

        function renderScholarList() {
            const list = document.getElementById('scholar-list');
            list.innerHTML = '';
            
            let lastGroup = "";
            scholars.forEach((s, i) => {
                if (s.group !== lastGroup) {
                    const groupHeader = document.createElement('div');
                    groupHeader.className = "px-3 py-1 mt-2 text-xs font-bold text-slate-500 border-b border-slate-700";
                    groupHeader.innerText = s.group;
                    list.appendChild(groupHeader);
                    lastGroup = s.group;
                }

                const btn = document.createElement('button');
                btn.id = `btn-${i}`;
                btn.className = "scholar-btn w-full text-left px-4 py-3 text-sm flex items-center justify-between text-slate-300";
                btn.onclick = () => toggleScholar(i);
                btn.innerHTML = `
                    <div class="flex items-center">
                        <span class="scholar-legend" style="background-color: ${s.color}"></span>
                        <span>${s.name}</span>
                    </div>
                `;
                list.appendChild(btn);
            });
        }

        function initChart() {
            const ctx = document.getElementById('theologyChart').getContext('2d');
            Chart.defaults.color = '#94a3b8';
            Chart.defaults.font.family = "'Noto Sans KR', sans-serif";
            
            chartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: axes,
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: {
                                font: { size: 11, weight: 'bold' },
                                color: (ctx) => {
                                    const text = ctx.label;
                                    if (text.startsWith('ğŸ”µ')) return '#60a5fa'; // Blue
                                    if (text.startsWith('ğŸ”´')) return '#f87171'; // Red
                                    if (text.startsWith('ğŸŸ¢')) return '#4ade80'; // Green
                                    return '#94a3b8';
                                }
                            },
                            suggestedMin: 0,
                            suggestedMax: 10,
                            ticks: { display: false, stepSize: 2 }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        function updateUI() {
            // 1. Update List Styles
            scholars.forEach((s, i) => {
                const btn = document.getElementById(`btn-${i}`);
                if (activeIndices.has(i)) {
                    btn.classList.add('active', 'bg-slate-800', 'text-white');
                    btn.classList.remove('text-slate-300');
                } else {
                    btn.classList.remove('active', 'bg-slate-800', 'text-white');
                    btn.classList.add('text-slate-300');
                }
            });

            // 2. Update Chart
            const selectedScholars = Array.from(activeIndices).map(i => scholars[i]);
            chartInstance.data.datasets = selectedScholars.map(s => ({
                label: s.name,
                data: s.scores,
                backgroundColor: s.bg,
                borderColor: s.color,
                borderWidth: 2,
                pointBackgroundColor: s.color,
                pointRadius: 3
            }));
            chartInstance.update();

            // 3. Update Text & Insights
            updateInfoPanel(selectedScholars);
        }

        function updateInfoPanel(selected) {
            const titleEl = document.getElementById('info-title');
            const contentEl = document.getElementById('info-content');
            const insightEl = document.getElementById('ai-insight');

            if (currentMode === 'story') {
                // Story mode content is handled by loadStoryStep
                return;
            }

            // Explore Mode Logic
            if (selected.length === 1) {
                const s = selected[0];
                titleEl.innerText = s.name;
                contentEl.innerHTML = `<p>${s.desc}</p>`;
                
                // Insight for single scholar
                const highAxes = s.scores.map((v, i) => ({val:v, idx:i})).sort((a,b) => b.val - a.val).slice(0,2);
                const axisNames = highAxes.map(x => axes[x.idx].substring(1)).join(", ");
                insightEl.innerHTML = `
                    <p class="font-bold text-white mb-1">ğŸ” ë‹¨ì¼ ë¶„ì„</p>
                    <p>${s.name.split('(')[0]}ì˜ ì‹ í•™ì€ <strong>${axisNames}</strong> ì¸¡ë©´ì—ì„œ ê°€ì¥ ê°•í•œ ê°•ì¡°ì ì„ ë³´ì…ë‹ˆë‹¤. ì´ëŠ” í•´ë‹¹ ì „í†µì´ ì„¸ë¡€ë¥¼ ì •ì˜í•˜ëŠ” í•µì‹¬ í‚¤ì›Œë“œì…ë‹ˆë‹¤.</p>
                `;
            } else if (selected.length === 2) {
                titleEl.innerText = "ë¹„êµ ë¶„ì„ (Comparative Analysis)";
                contentEl.innerHTML = `
                    <p class="mb-4"><span class="font-bold text-blue-400">${selected[0].name.split('(')[0]}</span>: ${selected[0].desc}</p>
                    <hr class="border-slate-600 my-2">
                    <p><span class="font-bold text-red-400">${selected[1].name.split('(')[0]}</span>: ${selected[1].desc}</p>
                `;

                // Insight for 2 scholars (Gap analysis)
                let maxDiff = 0;
                let maxDiffIdx = -1;
                selected[0].scores.forEach((val, i) => {
                    const diff = Math.abs(val - selected[1].scores[i]);
                    if (diff > maxDiff) {
                        maxDiff = diff;
                        maxDiffIdx = i;
                    }
                });
                
                insightEl.innerHTML = `
                    <p class="font-bold text-white mb-1">âš”ï¸ í•µì‹¬ ì „ì„ </p>
                    <p>ë‘ ì…ì¥ì´ ê°€ì¥ ì²¨ì˜ˆí•˜ê²Œ ëŒ€ë¦½í•˜ëŠ” ì§€ì ì€ <strong>'${axes[maxDiffIdx].substring(1)}'</strong>ì…ë‹ˆë‹¤. (ê²©ì°¨: ${maxDiff}ì ). ì´ëŠ” ì„¸ë¡€ì˜ ì •ì˜ë¥¼ ë‘˜ëŸ¬ì‹¼ ê·¼ë³¸ì ì¸ ì„¸ê³„ê´€ì˜ ì°¨ì´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
                `;
            } else {
                titleEl.innerText = "ë‹¤ë©´ ë¶„ì„ (Multi-perspective)";
                contentEl.innerHTML = selected.map(s => `
                    <div class="mb-3 border-l-2 pl-3" style="border-color:${s.color}">
                        <strong class="text-white block">${s.name.split('(')[0]}</strong>
                        <span class="text-xs text-slate-400">${s.desc.substring(0, 100)}...</span>
                    </div>
                `).join('');

                // Insight for 3+
                insightEl.innerHTML = `
                    <p class="font-bold text-white mb-1">ğŸ“Š ì¢…í•© ê´€ì¸¡</p>
                    <p>ì„¸ ê°€ì§€ ì´ìƒì˜ ê´€ì ì´ êµì°¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì°¨íŠ¸ì˜ ë„“ì€ ë©´ì ì€ ì´ ì£¼ì œê°€ ì—­ì‚¬ì ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ë‹¤ì–‘í•œ ê°•ì¡°ì ì„ ê°€ì¡ŒëŠ”ì§€ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
                `;
            }
        }

        // === Story Mode Functions ===
        function loadStoryStep() {
            const step = storySteps[currentStep];
            document.getElementById('step-indicator').innerText = `Step ${currentStep + 1}/${storySteps.length}`;
            
            // Set active layers
            activeIndices = new Set(step.layers);
            
            // Update Text manually for Story Mode
            const titleEl = document.getElementById('info-title');
            const contentEl = document.getElementById('info-content');
            const insightEl = document.getElementById('ai-insight');
            
            titleEl.innerText = step.title;
            contentEl.innerHTML = `<p>${step.desc}</p>`;
            
            // Contextual Insight based on the active scholars
            const names = Array.from(activeIndices).map(i => scholars[i].name.split('(')[0]).join(", ");
            insightEl.innerHTML = `
                <p class="font-bold text-yellow-400 mb-1">ğŸ“œ ì—­ì‚¬ì  ë§¥ë½</p>
                <p>í˜„ì¬ ì „ì¥: <strong>${names}</strong>. ì°¨íŠ¸ì˜ í˜•íƒœ ë³€í™”ë¥¼ í†µí•´ ì‹ í•™ì  ë¬´ê²Œì¤‘ì‹¬ì´ ì´ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹­ì‹œì˜¤.</p>
            `;

            updateUI(); // Updates chart and list highlights
        }

        function nextStep() {
            if (currentStep < storySteps.length - 1) {
                currentStep++;
                loadStoryStep();
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                loadStoryStep();
            }
        }
    </script>
</body>
</html>