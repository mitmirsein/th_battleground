<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>케리그마 매일 묵상 | Kerygma Daily</title>
    <meta name="description" content="매일 구약과 신약 말씀을 원어와 함께 묵상하는 웹앱">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" type="image/png" href="icons/favicon-16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="icons/favicon-32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="icons/favicon-48.png" sizes="48x48">
    <link rel="icon" type="image/png" href="icons/favicon-64.png" sizes="64x64">
    <link rel="icon" type="image/png" href="icons/icon-192.png" sizes="192x192">

    <!-- Google Fonts (Korean + Greek + Hebrew) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Gentium+Book+Plus:ital,wght@0,400;0,700;1,400&family=Noto+Sans+Hebrew:wght@400;700&family=Noto+Sans+KR:wght@300..900&family=Noto+Serif:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Serif+KR:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>케리그마 매일 묵상</h1>
            <div class="date-sub">
                <span id="date-display">로딩 중...</span>
                <span id="liturgical-display"></span>
            </div>
        </header>

        <main id="main-content">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>오늘의 말씀을 불러오는 중...</p>
            </div>
        </main>

        <!-- OT Card Template -->
        <template id="verse-card-template">
            <article class="verse-card">
                <div class="verse-header">
                    <span class="verse-ref"></span>
                    <span class="verse-label"></span>
                </div>
                <div class="original-text"></div>
                <div class="trans-section">
                    <div class="std-trans"></div>
                    <div class="eng-trans"><span class="bsb-label">BSB</span> <span class="eng-text"></span></div>
                    <div class="lit-trans"><span class="lit-label">직역</span> <span class="lit-text"></span></div>
                </div>
            </article>
        </template>

        <!-- Meditation Card -->
        <section class="meditation-card" id="meditation-section" style="display:none;">
            <div class="med-header">
                <div class="med-title">오늘의 묵상</div>
                <button class="share-btn" onclick="handleShare()" aria-label="묵상 공유하기">
                    <i data-lucide="share-2" style="width:1.2em;height:1.2em;"></i>
                </button>
            </div>
            <div class="med-content" id="meditation-content"></div>
            <div class="med-question">
                <div class="q-text" id="question-text"></div>
            </div>
        </section>

        <!-- Parsing Panel -->
        <div id="parsing-panel">
            <span class="close-panel" onclick="hideParsing()">×</span>
            <div class="panel-content">
                <div class="panel-left">
                    <div id="p-word" class="panel-word">-</div>
                    <div id="p-sound" class="panel-sound">-</div>
                </div>
                <div class="panel-info">
                    <div id="p-lemma" class="panel-lemma">기본형: -</div>
                    <div id="p-morph" class="panel-morph">문법 정보</div>
                    <div id="p-gloss" class="panel-gloss">의미</div>
                </div>
            </div>
        </div>

        <!-- Settings Toggle Button -->
        <button class="settings-toggle" onclick="toggleSettings()" aria-label="설정 열기">
            <i data-lucide="settings"></i>
        </button>

        <!-- Settings Overlay -->
        <div class="settings-overlay" id="settings-overlay" onclick="closeSettings()"></div>

        <!-- Settings Panel -->
        <div id="settings-panel">
            <div class="settings-header">
                <span class="settings-title">⚙️ 설정</span>
                <button class="close-settings" onclick="closeSettings()" aria-label="설정 닫기">×</button>
            </div>
            <div class="settings-content">
                <!-- Theme Toggle -->
                <div class="setting-group">
                    <label class="setting-label">화면 모드</label>
                    <p class="setting-description">시스템 설정과 무관하게 테마를 선택하세요</p>
                    <div class="theme-buttons">
                        <button class="theme-btn" data-theme="auto" onclick="setTheme('auto')">
                            <i data-lucide="monitor" style="width:1em;height:1em;"></i> 자동
                        </button>
                        <button class="theme-btn" data-theme="light" onclick="setTheme('light')">
                            <i data-lucide="sun" style="width:1em;height:1em;"></i> 라이트
                        </button>
                        <button class="theme-btn" data-theme="dark" onclick="setTheme('dark')">
                            <i data-lucide="moon" style="width:1em;height:1em;"></i> 다크
                        </button>
                    </div>
                </div>

                <!-- Font Size -->
                <div class="setting-group">
                    <label class="setting-label">원어 폰트 크기</label>
                    <p class="setting-description">히브리어/헬라어 원문 텍스트 크기를 조절하세요</p>
                    <div class="font-size-control">
                        <span style="font-size:0.8rem;">가</span>
                        <input type="range" class="font-size-slider" id="font-size-slider" min="1.2" max="2.4"
                            step="0.1" value="1.6" oninput="setFontSize(this.value)">
                        <span style="font-size:1.4rem;font-weight:bold;">가</span>
                    </div>
                    <div class="font-size-value" id="font-size-value">1.6rem</div>
                    <div class="font-preview">
                        <span class="font-preview-text" id="font-preview-text">שָׁלוֹם</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notification -->
        <div id="toast" class="toast">클립보드에 복사되었습니다</div>

        <!-- Liturgical Info Modal -->
        <div id="liturgical-modal" class="liturgical-modal" onclick="closeLiturgicalModal()">
            <div class="liturgical-modal-content" onclick="event.stopPropagation()">
                <button class="close-modal" onclick="closeLiturgicalModal()" aria-label="닫기">×</button>
                <h3 id="liturgical-modal-title">절기 이름</h3>
                <p id="liturgical-modal-desc">절기 설명</p>
            </div>
        </div>

        <!-- Error State -->
        <div id="error-state" style="display:none;">
            <div class="error-card">
                <h2>⚠️ 데이터를 불러올 수 없습니다</h2>
                <p>구글 시트 연결을 확인해 주세요.</p>
                <button onclick="loadTodayData()">다시 시도</button>
            </div>
        </div>

        <footer class="site-footer">
            <p><a href="install.html"><i data-lucide="smartphone"
                        style="width:1em;height:1em;vertical-align:-0.125em;"></i>
                    앱 설치</a> | powered by <a href="https://kerygma.co.kr" target="_blank"
                    rel="noopener"><strong>케리그마출판사</strong></a></p>
        </footer>

        <script type="module" src="js/main.js"></script>
        <script>lucide.createIcons();</script>
</body>

</html>