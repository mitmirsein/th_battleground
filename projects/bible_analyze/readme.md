# 성경 구절 분석 6.0 Pro Automation

엄밀한 성서학적 주석부터 현대적 설교 적용까지 연결하는 **4단계 심층 분석 자동화 도구**입니다.
Google Gemini API (**3.0 Pro Preview** 기본 탑재)를 사용하여 복잡한 신학적 분석을 몇 초 만에 완료합니다.

## ✨ 6.0 주요 기능
- **원클릭 4단계 분석**: 구조 분석 → 문헌학적 분석 → 신학적 종합 → 설교 프레임워크.
- **배치 처리(Batch)**: 여러 구절을 한 번에 입력하여 순차적 분석 가능 (구절 간 콤마 구분).
- **자동 마크다운 저장**: 분석 완료 후 깔끔한 `.md` 파일로 저장.
- **혁신적 시각화**: 복잡한 다이어그램 대신 **'들여쓰기 텍스트(Indented Chiasm)'** 방식을 도입하여 구조의 대칭미를 명확히 표현.
- **설교의 깊이 강화**: 기존의 뻔한 설교 예시를 삭제하고, **신학적 난제 해설(Apologetics)**과 **인문학적 통찰(Interdisciplinary Insight)** 섹션 추가.

---

## 🚀 설치 (Installation)

1. **폴더 이동**
   ```bash
   cd bible_analyze
   ```

2. **가상환경 설정 및 패키지 설치** (최초 1회)
   ```bash
   python3 -m venv venv
   source venv.nosync/bin/activate
   pip install -r requirements.txt
   ```

3. **API 키 설정**
   - `.env` 파일을 열고 Gemini API 키를 입력하세요.
   ```bash
   GOOGLE_API_KEY=your_actual_api_key_here
   ```

---

## 📖 사용법 (Usage)

### 1. 단일 구절 분석
기본적으로 **Gemini-3.0-Pro-Preview** 모델을 사용하여 분석합니다.

```bash
python analyze_api.py "요한복음 3:16"
```

### 2. 여러 구절 배치 처리 (Batch)
여러 본문을 한 번에 분석하려면 **공백**이나 **콤마(`,`)**로 구분하여 입력하세요.

```bash
# 콤마 구분 (권장)
python analyze_api.py "창세기 1:1, 요한복음 3:16, 로마서 8:1"

# 범위 지정 (모델이 문맥을 이해함)
python analyze_api.py "요한복음 3:16-17" 
```

### 3. 모델 변경 (옵션)
비용 절감이나 속도를 위해 다른 모델(`flash` 등)을 사용하고 싶다면 `--model` 옵션을 사용하세요.

```bash
python analyze_api.py "시편 23편" --model gemini-2.0-flash-exp
```

### 4. 브라우저 자동화 (Playwright)
API 사용이 어렵거나, 실제 웹 인터페이스(Gemini)를 통해 분석하고 싶을 때 사용합니다.

1.  **실행**:
    ```bash
    python analyze_browser.py "요한복음 3:16"
    ```
2.  **로그인 (최초 1회만)**:
    - 스크립트가 사용자 PC의 크롬 브라우저를 실행합니다.
    - 최초 실행 시에만 **직접 로그인**을 해주세요. (이후엔 로그인 상태가 유지됩니다)
3.  **반자동 저장 (Clipboard Bridge)**:
    - 프롬프트 전송은 자동으로 이루어집니다.
    - AI 답변이 완성되면 브라우저에서 **[복사] 버튼**을 클릭하거나 텍스트를 복사하세요.
    - 터미널로 돌아와 **`Enter` 키**를 누르면, 복사한 내용을 자동으로 캡처하여 저장합니다.
    - 4단계 완료 후 최종 리포트 파일(`.md`)이 자동 생성됩니다.

---

## 💡 자주 묻는 질문 (FAQ)

**Q: "창 1:1"이나 "요 3:16" 같은 약어도 되나요?**
A: **네, 가능합니다!** Google Gemini는 성경 약어를 완벽하게 이해합니다. "Gen 1:1", "Genesis 1:1" 모두 인식합니다.
   
**Q: 머메이드(Mermaid) 차트 대신 텍스트로 나오는데 정상인가요?**
A: **네, 정상입니다.** v6.0부터는 가독성과 호환성을 위해 **'들여쓰기 텍스트(Indented Text)'** 방식을 표준으로 채택했습니다. 이는 에디터 종류에 상관없이 교차대구 구조(Chiasm)의 대칭성을 완벽하게 보여줍니다.

**Q: 설교 예시가 사라졌나요?**
A: 단순한 예시 대신, 설교의 지적 깊이를 더해줄 **'난제 해설(Apologetics)'**과 **'인문학적 통찰'** 섹션으로 업그레이드되었습니다.

---

## 📁 구조 (Structure)

```
bible_analyze/
├── analyze_api.py          # 메인 자동화 스크립트 (Python)
├── analyze_browser.py      # 브라우저 에이전트 (Playwright)
├── requirements.txt        # 의존성 패키지 목록
├── .env                    # API 키 설정 파일 (사용자 생성 필요)
└── 성경구절분석 6.0/        # 프롬프트 원본 폴더 (수정 가능)
    ├── 1단계-구조문맥분석.md
    ├── 2단계-문헌학적미세분석.md
    ├── 3단계-신학역사상호본문종합.md
    └── 4단계-설교프레임워크.md
```